<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">

<h:head>
	<title>JSF 2.0 Hello World</title>
</h:head>
<h:body bgcolor="white">
	<h3>JSF 2.0 Hello World Example - chat.xhtml</h3>
	<h4>
		Welcome!!! <br /> Chat FOR:
		<h:outputText value="#{loginBean.name}" id="currentUser" />
		<br />UserPass: #{loginBean.pass}
	</h4>
	<h:form id="form">
		<h:outputText id="all_msg"
			value="#{fn:replace(chatBean.allMessages,'\\n','&lt;br/&gt;')}"
			escape="false"
			style="height: 200px!important; overflow-y: scroll!important; display:block!important;" />
		<br />____________________________________________________________________________________________________<br />
		<br />
		<h:selectOneMenu value="#{chatBean.toUser}">
			<f:selectItems value="#{chatBean.users}" />
		</h:selectOneMenu>
		<h:inputText value="#{chatBean.message}"
			style="width: 646px; height: 46px; " />
		<h:commandButton value="Send" action="#{chatBean.sendMessage}"
			style="height: 46px; width: 149px; " />
		<h:commandButton id="idOfButton">
			 <f:ajax render="all_msg" listener="#{chatBean.handleEvent}" />
		</h:commandButton>
		<script>
			var myVar = setInterval(function() {myTimer()}, 1000);
			function myTimer() {
				document.getElementById('form:idOfButton').click();
			}
		</script>
	</h:form>
</h:body>
</html>

